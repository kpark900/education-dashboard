<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>교육 프로그램 대시보드</title>
    
    <!-- Load dependencies -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">

    <style>
        .filter-button {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            background-color: #f3f4f6;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-button.active {
            background-color: #3b82f6;
            color: white;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 2rem;
        }

        .metric-card {
            background: #f8fafc;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* Modal styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 0.5rem;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
        }

        @media (max-width: 768px) {
            .grid-cols-4 {
                grid-template-columns: 1fr;
            }
            
            .chart-container {
                height: 300px !important;
            }
            
            .filter-button {
                width: calc(50% - 1rem);
                text-align: center;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script>
        const { useState, useEffect, useRef } = React;

        // Sample data with more detail
        const allData = {
            '2025-1': {
                participation: {
                    labels: ['1월', '2월', '3월', '4월', '5월', '6월'],
                    values: [450, 480, 520, 510, 540, 580]
                },
                satisfaction: [4.2, 4.3, 4.5, 4.4, 4.6, 4.8]
            },
            '2025-2': {
                participation: {
                    labels: ['7월', '8월', '9월', '10월', '11월', '12월'],
                    values: [560, 590, 610, 590, 620, 650]
                },
                satisfaction: [4.3, 4.4, 4.6, 4.5, 4.7, 4.9]
            }
        };

        // Components
        const FilterButtons = ({ options, selected, onChange }) => {
            return React.createElement('div', { className: 'flex flex-wrap mb-4' },
                options.map(option => 
                    React.createElement('button', {
                        key: option.value,
                        className: `filter-button ${selected === option.value ? 'active' : ''}`,
                        onClick: () => onChange(option.value)
                    }, option.label)
                )
            );
        };

        const Modal = ({ isOpen, onClose, title, content }) => {
            if (!isOpen) return null;

            return React.createElement('div', { className: 'modal', onClick: onClose },
                React.createElement('div', { 
                    className: 'modal-content',
                    onClick: e => e.stopPropagation()
                },
                    React.createElement('h2', { className: 'text-xl font-bold mb-4' }, title),
                    React.createElement('div', null, content),
                    React.createElement('button', {
                        className: 'mt-4 px-4 py-2 bg-blue-500 text-white rounded',
                        onClick: onClose
                    }, '닫기')
                )
            );
        };

        const Dashboard = () => {
            const [period, setPeriod] = useState('2025-2');
            const [category, setCategory] = useState('all');
            const [modalInfo, setModalInfo] = useState({ isOpen: false, title: '', content: '' });

            // Chart references
            const participationChartRef = useRef(null);
            const satisfactionChartRef = useRef(null);

            // Update charts when filters change
            useEffect(() => {
                updateCharts();
            }, [period, category]);

            const updateCharts = () => {
                // Update chart data based on selected filters
                const data = allData[period];
                
                if (participationChartRef.current) {
                    participationChartRef.current.data.labels = data.participation.labels;
                    participationChartRef.current.data.datasets[0].data = data.participation.values;
                    participationChartRef.current.update();
                }

                if (satisfactionChartRef.current) {
                    satisfactionChartRef.current.data.datasets[0].data = data.satisfaction;
                    satisfactionChartRef.current.update();
                }
            };

            const showDetails = (title, content) => {
                setModalInfo({
                    isOpen: true,
                    title,
                    content
                });
            };

            // Render dashboard
            return React.createElement('div', { className: 'p-4 md:p-8 max-w-7xl mx-auto' },
                // Header with filters
                React.createElement('div', { className: 'mb-8' },
                    React.createElement('h1', { className: 'text-2xl md:text-3xl font-bold mb-4' }, 
                        '비교과 프로그램 성과 대시보드'
                    ),
                    React.createElement(FilterButtons, {
                        options: [
                            { label: '2025-1학기', value: '2025-1' },
                            { label: '2025-2학기', value: '2025-2' }
                        ],
                        selected: period,
                        onChange: setPeriod
                    }),
                    React.createElement(FilterButtons, {
                        options: [
                            { label: '전체', value: 'all' },
                            { label: '리더십', value: 'leadership' },
                            { label: '연구', value: 'research' },
                            { label: '창업', value: 'startup' }
                        ],
                        selected: category,
                        onChange: setCategory
                    })
                ),

                // Interactive metrics
                React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8' },
                    React.createElement('div', {
                        className: 'metric-card',
                        onClick: () => showDetails('참여 학생 상세 분석', '학년별, 전공별 분포도 등')
                    },
                        React.createElement('p', { className: 'text-sm text-gray-600' }, '총 참여 학생'),
                        React.createElement('p', { className: 'text-2xl font-bold' }, '100명'),
                        React.createElement('p', { className: 'text-sm text-gray-500' }, '▲ 15% 증가')
                    ),
                    // Add more metric cards...
                ),

                // Charts with hover interactions
                React.createElement('div', { className: 'grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8' },
                    // Add interactive charts...
                ),

                // Modal for detailed views
                React.createElement(Modal, {
                    isOpen: modalInfo.isOpen,
                    onClose: () => setModalInfo({ ...modalInfo, isOpen: false }),
                    title: modalInfo.title,
                    content: modalInfo.content
                })
            );
        };

        // Render the app
        ReactDOM.render(
            React.createElement(Dashboard),
            document.getElementById('root')
        );
    </script>
</body>
</html>